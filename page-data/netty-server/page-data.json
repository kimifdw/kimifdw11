{"componentChunkName":"component---src-templates-blog-post-js","path":"/netty-server/","result":{"data":{"site":{"siteMetadata":{"title":"FDW-blog","author":"kimifdw"}},"markdownRemark":{"id":"b95a5208-0554-596f-ba52-e56d89fddc03","html":"<h2 id=\"channel源码\"><a href=\"#channel%E6%BA%90%E7%A0%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>channel源码</h2>\n<ul>\n<li>简介到网络套接字或IO操作的组件，如读、写、连接和绑定。类图如下：\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/79f3cb95e27bc67d20f5b5aeaf8e5926/1bba8/channel-4.1.53.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 76.35135135135135%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACH0lEQVQoz3VTaU/jMBDN//8nuxJHEayEVhxiBaWbpEeOtlBKQ5ykTcHNndiO7e6kWRapsE/zwTPjNzN6Yyv5DlmDtDXAK8Yb/BZFeLNp7S1N4102g7vFjgGmbHfACRrYx8P+qdo71LRTHLn27HzUP9O0E1U97uunmnr0shgkVYDjiYfM5XJckVSRUrb8VRKUJMuqeJX4hJZx9prmOM5w45IiStd5GRNWJQUOU59zIkStrDDyVlMPWcgzfc92XQv5E8YplCxo5ixH0MdFJmEl3wom6lrU4r2f4vjTh3lv9nCraVe29Ws6vlnMdSkF5Bgth48/DetiZF9Izref8DF2ljMoCwcqKKlLyinjrGDNIWf5Vgoh9vl/BUPh82DU0dVOr3fUvfv2PFchWNHcmJz1dQge/L4/QK4JwX/NPsic14xVsIF1GAlOwW3v1ZTkVRKmgahhLvpFZ6i1wk4Q2AhZ7ouJkOn7YxCTc7Zcj4Ng7Lomco04Xu4ocp/sePbT7A4E07Xrx+nt7PEemKwmT053Mr3RjXMQMgyf9seWDUQb4lwWBWtvtII3QcnLutp+BUUIuY5WQ+tHXzvR1E63e6hrnV73u+dZkBacg8jN2t8b7K+qrllRxFWVxvHGQ2FV5GVZyvfFwMOAbX3dec8njC382YtjwGtbOIP5QsuLzfY/UNqPAj8J9kQJTdLIeuhaxqUxurSMK2N0gd+CRjpSkU/4A7iSSG6Vz5KwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/79f3cb95e27bc67d20f5b5aeaf8e5926/fcda8/channel-4.1.53.png\"\n        srcset=\"/static/79f3cb95e27bc67d20f5b5aeaf8e5926/12f09/channel-4.1.53.png 148w,\n/static/79f3cb95e27bc67d20f5b5aeaf8e5926/e4a3f/channel-4.1.53.png 295w,\n/static/79f3cb95e27bc67d20f5b5aeaf8e5926/fcda8/channel-4.1.53.png 590w,\n/static/79f3cb95e27bc67d20f5b5aeaf8e5926/1bba8/channel-4.1.53.png 642w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li><code class=\"language-text\">Unsafe</code>。用于数据传输</li>\n<li><code class=\"language-text\">AbstractNioChannel</code>。NIO的基本操作</li>\n<li>通过<code class=\"language-text\">pipeline</code>来进行事件操作和流转。</li>\n</ul>\n<h2 id=\"channelpipeline\"><a href=\"#channelpipeline\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ChannelPipeline</h2>\n<blockquote>\n<p>拦截器，维护ChannelHandler列表，类似于servlet和filter的关系</p>\n</blockquote>\n<h3 id=\"创建\"><a href=\"#%E5%88%9B%E5%BB%BA\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>创建</h3>\n<ul>\n<li>\n<p>每个通道都有自己的管道，它会在创建新通道时自动创建</p>\n<h3 id=\"特性\"><a href=\"#%E7%89%B9%E6%80%A7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>特性</h3>\n</li>\n<li>\n<p>支持运行时动态添加或删除<code class=\"language-text\">ChannelHandler</code>,线程安全</p>\n<h3 id=\"流程图如下\"><a href=\"#%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%A6%82%E4%B8%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>流程图如下</h3>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1abb8304aa0ae00b6084a0d689c787cf/61c63/channel-pipline-flow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 117.56756756756756%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoUlEQVQ4y41Ua2/DIAzM//+dm7R+ah48bCBsh514hKbTrKpyAuc7Hw6TY/9Mz+/3UWvNORNxKWVYmvZ9/wMWY1zm+evx+PxoscxLSulfYCzFSMH7ZUGFeV1XJMT8Cy4S2FfOQM7MIQTQIgG/FrKKlk/o55UcJTglIFPKCsA2beQCViqi6L0PEsCYN+hQ3zvniCiBSfAX5iQ82ERMvRbxmbCK5pGjaO3B+mxqLb/YLo7YEYzM5lAjj2TLiZtsvHfOwwHdPPacRTaJvb3skjOLbPzfyNat9Spbd1SJYWxGZliCSVg1ti1K4GXrJTafMRvrtkI/SVyYtTwSyLPHfs64nfhxfqPb+xmW9/5rYFxsaeyZmp/OS4DfDgaUbttkSLzOzw2zeoO1wSfNVVQ9owdn03M4/wIGEnJuwUVle+fCrWy819lm0hId+Bya5gqRkZvVapjN1lu3lXN/CZVtj1Z6ssPQ3mx3fzcImHvnLkOCaMMtMdwNMiRJfnzzSUpLRedRbo/U07aPWZaM5hcs1wgFGWbFxzNwhRw3jAw7mj2n8JD9A55WiDFmzH69AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/1abb8304aa0ae00b6084a0d689c787cf/fcda8/channel-pipline-flow.png\"\n        srcset=\"/static/1abb8304aa0ae00b6084a0d689c787cf/12f09/channel-pipline-flow.png 148w,\n/static/1abb8304aa0ae00b6084a0d689c787cf/e4a3f/channel-pipline-flow.png 295w,\n/static/1abb8304aa0ae00b6084a0d689c787cf/fcda8/channel-pipline-flow.png 590w,\n/static/1abb8304aa0ae00b6084a0d689c787cf/61c63/channel-pipline-flow.png 693w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n</li>\n<li><code class=\"language-text\">ChannelInboundHandler</code>。监控Channel状态变化，API如下图所示：\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/89e841656f970119064f16658e500f27/87254/ChannelInboundHandler-api.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 89.86486486486487%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOklEQVQ4y61TaW/TQBD1zw+0qeA/8LW0RaggUQESSKBeIYmvxI7rKI7vI25Sx2ces5sGStVKQDrS08zuzj6/2RkLvh/AdTw4jgObMJ3aPPY8H6ORgV63B7EvQhRFdHt9KOqA502sKSyCbVMu4/A8DmG5mOE68uFMxvAdC6FnI3CnSOMQSeBhcqVjOr6CZY4wISShh3yRIqBclp/GAarlYr1H94SvqokTScOnjoYPp0N8vNBxcjbE546B/iRFd5zgh7nGhRERYo5vqovvAw+nWoiOOcO5kUAchxBevNfROpDw8vAcrdcd7Oxf4vl+h3CJvYMu2oc9tI/62HvTx7MjGTvHI+wS2u8Mjt1jg69bb0d49cWEgFtbZVR64iMi2RGVnVJpLI59G7PQJe9gHvuol3M8bg2EsmpQ3OT8TYa6jn5PhKKo1ASZe0VWIZMfDIZQCRPLRlFWqJsVqrr5BbYuqwpCQ0FTlJgnEXWLuk1dtiyLuj2FQx1ksDeddz0kSYJmtXpQX1mWa8J6mVN5FjRdgyLJfExkSYKqKJBIqcoU0rjomg5VVTE2x0jTa2RZhsWCOpznnJB5YUVfa4j5Jk3ghwEC36e5JGWuC5/Hax8EAcIw5OsoipEtl2jqGhWVWZNnVmwI+XM2DT9gfpP0GFjOQ1aVBSu5wf8aE7PBuuTsN+Hdw7/F3Xu85KL4k3AbpWvC/GkJb8fm6Qj52GzzhvffkyvcRtl94woL+u3Y3DH2PC94p1jMwPb/BezOT0amXYZuJjnHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/89e841656f970119064f16658e500f27/fcda8/ChannelInboundHandler-api.png\"\n        srcset=\"/static/89e841656f970119064f16658e500f27/12f09/ChannelInboundHandler-api.png 148w,\n/static/89e841656f970119064f16658e500f27/e4a3f/ChannelInboundHandler-api.png 295w,\n/static/89e841656f970119064f16658e500f27/fcda8/ChannelInboundHandler-api.png 590w,\n/static/89e841656f970119064f16658e500f27/87254/ChannelInboundHandler-api.png 604w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li><code class=\"language-text\">ChannelOutboundHandler</code>。拦截IO事件，API如下图所示：\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/da5231c3c9573a7e59451175329c7852/d72eb/ChannelOutboundHandler-api.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 587px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 87.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVQ4y+WQ22vUQBTG819rLYhQEB+sBf8Gq9IXaauID1ZZfRAMeymydTczyUwmZm+57cXtbpLN55kR6+6iIOqLOPDNOTmZ+Z1vjtXkPbxudPDK7qBWd1BrOHjb4rA7Iewu/aPam5aHWtOlnMF2+qjzIV6+/4gzu2vq+rvOR+aedf/FBe6cvMO9Z13sn7Zx8PQCd4/b2D9p49bROXYfn2PnYQPXDxu4efQBO4dNXHtQx+6jFm6Q9p50cPuUYe/YwcFzAkKv6RSTbAAlvK9yOSSppwQGoU9RUo1RrjAMA8yyGIvPEyMUC6AqCUIqc1hFWWKeZoiTCEHwCZ4noHxFUUIICV8phGEPnLsQkuC9PlQQYDAcYTyeYBRFGFIeRTHiOIFVEvAyTelACOYwusjNZZ0zxuG5LqSUkMKn3IOghpLA8/kltldVVbBWtC2yMdEH8OmgT+6kEMZdQE6U8sl9enXhe6xMXFdRFARcrYzDKO4bVy6544zBoVxosEczVQEyahqNIiRJgpQaTGezK/i3Rvq1VlHkugoN1gWt9Vwrz/MNLZdL4+aHQL397tocwRZwex6/op88udjo8idO/xHg+gz/E2CeL/4q8AtCrBZgXc2vZgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/da5231c3c9573a7e59451175329c7852/d72eb/ChannelOutboundHandler-api.png\"\n        srcset=\"/static/da5231c3c9573a7e59451175329c7852/12f09/ChannelOutboundHandler-api.png 148w,\n/static/da5231c3c9573a7e59451175329c7852/e4a3f/ChannelOutboundHandler-api.png 295w,\n/static/da5231c3c9573a7e59451175329c7852/d72eb/ChannelOutboundHandler-api.png 587w\"\n        sizes=\"(max-width: 587px) 100vw, 587px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n</ul>\n<h2 id=\"eventloop\"><a href=\"#eventloop\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Eventloop</h2>\n<ul>\n<li>处理注册在channel上的所有IO操作，事件循环器【单线程】,简单流程图如下：\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/833495149e0855507ca3b7152614ce76/977f7/eventloop.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 547px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 90.54054054054053%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpUlEQVQ4y5VT2VKDQBDk/7/NBzWKCQG5wxHYg12uXSB2WI0+qEmqOpUp2N6e6R6sUU8GTLaEN7QRQNsPapovr/6ChZ+el4owx30PosT1Q8fzvSDqBqWmG8gQEV0fpZkfJWAGqMrqquwn2QBX9KMqa3pLw9/kQWkQ0DzlwguTQWu98vH8DBQrfiGrdWZYhLEZb2TbVYQyIUGbltO0LHgL4Pbhq8FzrfSZ3I0KE4JGKAdbyhb1IS+PNY3S3AvTmnHCGi+Io+QQxKkfxe9hDEeRiNUNY5xmjZCEcXCKskqzIs3yoqqTvASNNbKRHU7vPd/e7e2t+/K2tx237UcLeaA3nCgrImQ7TTPlTU05Lp1PJ9MzAC9lP+DhCiW7AZ0bwzD2PJ5p4uHpFUnNy8kY9tMeM+0F31EZt0etk6yAiHHopqhwDvECxZGE8aGmLM1LrM1VvmUiwW49bmx7u8eSPr9uN/aOC3mJ5Ioy4wKCiBoDwzAUMOa6svnDkNCHTn6sUazz37zbZkOLijhegBju2G0DmIzVcVwfCwdl5HffV4XNhuf9vyb9xAdkIgy/Q+6TpAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/833495149e0855507ca3b7152614ce76/977f7/eventloop.png\"\n        srcset=\"/static/833495149e0855507ca3b7152614ce76/12f09/eventloop.png 148w,\n/static/833495149e0855507ca3b7152614ce76/e4a3f/eventloop.png 295w,\n/static/833495149e0855507ca3b7152614ce76/977f7/eventloop.png 547w\"\n        sizes=\"(max-width: 547px) 100vw, 547px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li><code class=\"language-text\">EventExecutor</code>。事件执行器，负责处理事件</li>\n<li><code class=\"language-text\">EventExecutorGroup</code>。维护了一个EventExecutor链表，继承了ScheduledExecutorService，execute方法通过next方法选择一个EventExecutor，并调用EventLoop#execute处理事件</li>\n<li><code class=\"language-text\">EventloopGroup</code>。负责调度Eventloop</li>\n<li>\n<p><code class=\"language-text\">NioEventloop</code>。</p>\n<ul>\n<li>启动流程如下图：\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b4bb066d05db7a9e4dc71a89b702a74e/9ac09/NioEventLoop-start.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.43243243243244%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA9hAAAPYQGoP6dpAAABD0lEQVQoz5WTWQ6DMAxEc/+DIgFiX0OA9JVRowhaQf0RGXvGnjjGdF03z/O6rlVVjePove/7vizLoijSNE2SJM9zUgTJZlnGCQUALAOInHOurutpmiAPw6BCgJqmIUiKIGgK8YlPZFkWQ0mgdPaR7fseO/thV8CbjOFt2xagqkVEDqdScgLAtG2LNkSiBLTIJyfUlRPihhryuIzuz92ekulprcWDQ3OGxPD+7qwh0z+M554cEnoAhMDnGdxhT8lIsB9jiuwDV6DKI3L8hjSnrfYBhxJPyQIxP3aTKZAdD0MRheKd+U4OBoH+6IfMLrERaNFQ7sng1JaJQNOq60fgvCH/MrQgylyX/mRfJ6K9egFxxK0RlxkjBgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/b4bb066d05db7a9e4dc71a89b702a74e/fcda8/NioEventLoop-start.png\"\n        srcset=\"/static/b4bb066d05db7a9e4dc71a89b702a74e/12f09/NioEventLoop-start.png 148w,\n/static/b4bb066d05db7a9e4dc71a89b702a74e/e4a3f/NioEventLoop-start.png 295w,\n/static/b4bb066d05db7a9e4dc71a89b702a74e/fcda8/NioEventLoop-start.png 590w,\n/static/b4bb066d05db7a9e4dc71a89b702a74e/efc66/NioEventLoop-start.png 885w,\n/static/b4bb066d05db7a9e4dc71a89b702a74e/c83ae/NioEventLoop-start.png 1180w,\n/static/b4bb066d05db7a9e4dc71a89b702a74e/9ac09/NioEventLoop-start.png 2204w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li>实例化流程图如下：\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f4b08314ff679c1ad3f013a4e043565b/d2dd6/NioEventLoop-sequence.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAB7CAAAewgFu0HU+AAAA00lEQVQoz6WRyRKDIBBE/f9/VA9WWeIWF1SiiHlCosR4yztQTDPdDBpUVZVlWVmWbdtKKZumSZIkiqI8zyn7vkeJ41gIQbl9E3D8sNDUdR0lcWmaorB3SlEURG8/BI2FnTHGSUopPL6itWa0GzMd67r6EgrdF4VZwjDkOaRoy26eponBWIdhWJYFlXWeZ+1BySuEhc04jvTvZgo+WGHBhsQgGIyHU27GJoPPSNhxfPsQlCPrNEuLO/Nb4fmBiS5xb7OyXO4BPO4X1nXNdP6Fp3n7gxejIUiA/2jY9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/f4b08314ff679c1ad3f013a4e043565b/fcda8/NioEventLoop-sequence.png\"\n        srcset=\"/static/f4b08314ff679c1ad3f013a4e043565b/12f09/NioEventLoop-sequence.png 148w,\n/static/f4b08314ff679c1ad3f013a4e043565b/e4a3f/NioEventLoop-sequence.png 295w,\n/static/f4b08314ff679c1ad3f013a4e043565b/fcda8/NioEventLoop-sequence.png 590w,\n/static/f4b08314ff679c1ad3f013a4e043565b/efc66/NioEventLoop-sequence.png 885w,\n/static/f4b08314ff679c1ad3f013a4e043565b/c83ae/NioEventLoop-sequence.png 1180w,\n/static/f4b08314ff679c1ad3f013a4e043565b/d2dd6/NioEventLoop-sequence.png 3399w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li>\n<p>与<code class=\"language-text\">Channel</code>的关联图如下：\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/96757ff64c2b825df87f7e4e5043aee6/07db2/NioEventLoop-Channel.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 79.05405405405406%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAB7CAAAewgFu0HU+AAABE0lEQVQoz5WT6Q6DMAyDef/HRAKEEPd9bt9qrUPQgciPKkvq2PGoV1VVmqbzPNd1XZbluq7btpEXRdE0Dd0syzipcK1t23EckyShxTVvGAba0zTxA+TrG8uyqEJrNaGEFky0SDwmQaKrKinsoIvE6/seVYuJx+Cu62DWyQrPwHZVVsIwLCFBxfkqxUPykY0BuoSlQRDgqvy7Z8YwTeLM8xzldtY/ZodsenEcQ8v+14Q/2RYMITuDZG30sw6i0C8hN4aRzCYYDAZ8FEWy8Ip5//faNszUNUifwFmCG0wFDLJ93w/DEBXgUYGdo4mjbGfoq1YOkhVQpFdxDxYeKjAyjw+RV4WvaHHL3geElQlkA5Cperlvalmu65hV0jcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/96757ff64c2b825df87f7e4e5043aee6/fcda8/NioEventLoop-Channel.png\"\n        srcset=\"/static/96757ff64c2b825df87f7e4e5043aee6/12f09/NioEventLoop-Channel.png 148w,\n/static/96757ff64c2b825df87f7e4e5043aee6/e4a3f/NioEventLoop-Channel.png 295w,\n/static/96757ff64c2b825df87f7e4e5043aee6/fcda8/NioEventLoop-Channel.png 590w,\n/static/96757ff64c2b825df87f7e4e5043aee6/efc66/NioEventLoop-Channel.png 885w,\n/static/96757ff64c2b825df87f7e4e5043aee6/c83ae/NioEventLoop-Channel.png 1180w,\n/static/96757ff64c2b825df87f7e4e5043aee6/07db2/NioEventLoop-Channel.png 3867w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"bytebuf\"><a href=\"#bytebuf\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ByteBuf</h2>\n<h3 id=\"bytebuf简介\"><a href=\"#bytebuf%E7%AE%80%E4%BB%8B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ByteBuf简介</h3>\n</li>\n</ul>\n</li>\n<li>创建buffer使用Unpooled或Pooled。</li>\n<li><code class=\"language-text\">discardable bytes</code>。无效空间，可丢弃字节的区域</li>\n<li><code class=\"language-text\">readable bytes</code>。内容空间，可读字节的区域，由readerIndex和writerIndex指针控制</li>\n<li><code class=\"language-text\">writable bytes</code>。空闲空间，可写入字节的区域，由writerIndex指针和capacity容量控制</li>\n<li>索引顺序存储。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4ec5a01943984836887aaf1384e4861d/d0d8c/Sequential-Access-Indexing.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 28.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApUlEQVQY01VOyxIDIQjb///OnWlvdVcFH6CNojttDkIIwRwkxMq11DJhpVYMRisiRuvSl9pa670fKKrivb8Bf8cY0OecY4zXdRmFgYjQYIiXmVX1MWvKOZWUS7IfZKA65z7OMZJNOiHQq8ifGWgT1mC19/FieVKBsvesbDMO/vqRLYSAnGqhEhONicraoUiguHi8+XXGs/X2QDZ2FphGCKP4cKmqXxb4X/8ndWIuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/4ec5a01943984836887aaf1384e4861d/fcda8/Sequential-Access-Indexing.png\"\n        srcset=\"/static/4ec5a01943984836887aaf1384e4861d/12f09/Sequential-Access-Indexing.png 148w,\n/static/4ec5a01943984836887aaf1384e4861d/e4a3f/Sequential-Access-Indexing.png 295w,\n/static/4ec5a01943984836887aaf1384e4861d/fcda8/Sequential-Access-Indexing.png 590w,\n/static/4ec5a01943984836887aaf1384e4861d/d0d8c/Sequential-Access-Indexing.png 609w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li>Discardable bytes。回收未使用区域如下图所示：\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d764c86d3d678df53cf6532e1f43d3b7/3dd3e/discardReadBytes-flow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 64.1891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABG0lEQVQoz41S7Y6EIAz0/R/zLtnksntZzwIKtHhDR3F/OqlNWynTD6Z3fM8yb9sWUwqOlFJrbb+BqZaat1xKybmsjpzz3WScMzMkFEetlRq1ZAfd/AFVPZP33UwXWbqEBTWDHKdZf4oRt8B1E1//q2YXs2oFeTtBnuGCBy4PUKEW9sVkpYYPHTtFYj4uAhVc8LNBFoW/nowa2oW9X3lXphh+gzyDvGR5/s0/kBheTcMQcxn2aQgEZZuXo90w7VYfgboYdTuMEdGDmZ2gK4zbRxq5DFgigZH10Csi56ratefq0HrA+eGp6757xvGS8MPGqpK/Smi+EXxj2pgzTERwjhwwcIWIHNP+Ct+P8EAjyo6cU1U/DSZztyyTwX9qzPw5Zq7iZgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/d764c86d3d678df53cf6532e1f43d3b7/fcda8/discardReadBytes-flow.png\"\n        srcset=\"/static/d764c86d3d678df53cf6532e1f43d3b7/12f09/discardReadBytes-flow.png 148w,\n/static/d764c86d3d678df53cf6532e1f43d3b7/e4a3f/discardReadBytes-flow.png 295w,\n/static/d764c86d3d678df53cf6532e1f43d3b7/fcda8/discardReadBytes-flow.png 590w,\n/static/d764c86d3d678df53cf6532e1f43d3b7/3dd3e/discardReadBytes-flow.png 595w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li>清除缓存索引。\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/92b2ea151038b818037a86a02cb93408/32056/clearing-index.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABCUlEQVQoz51S0W7DMAjM/39nnzZNamKwXQPODpw5Vt+6k4ugPg4M2Sjtz+dPKZT5MGu9C84Zdp63cJ5NRBrgVs4PseGnqkh/Oaobl5Jaa8S1hXZc1kFS0zu5SUt07Gk/6MiZS61ogxJlBMyu1QQ+MedS4JjZnYw6feB0o/GQK0Coimp9AoPx2/7XtuhoPoQaEUMeDFSAbg7gFWbdem8vJ0DuSgauwp8OrJTCfGn/Z9q2wltbH2jTWTh9WZXI/B+NpJTGnKMpt8RUS70YqmM6955nBfgYUhBkfD/DIlxrL3sOsMOHjMWW2OesMKSHDwIRwXryIz++6vdpvm2JFkZr8GfCugu/FdBc9xcXGv9h97LIcQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/92b2ea151038b818037a86a02cb93408/fcda8/clearing-index.png\"\n        srcset=\"/static/92b2ea151038b818037a86a02cb93408/12f09/clearing-index.png 148w,\n/static/92b2ea151038b818037a86a02cb93408/e4a3f/clearing-index.png 295w,\n/static/92b2ea151038b818037a86a02cb93408/fcda8/clearing-index.png 590w,\n/static/92b2ea151038b818037a86a02cb93408/32056/clearing-index.png 602w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n</ul>","timeToRead":3,"frontmatter":{"title":"netty server","date":"November 09, 2020","spoiler":"netty channel, 源码学习"},"fields":{"slug":"/netty-server/"}}},"pageContext":{"slug":"/netty-server/","previous":{"fields":{"slug":"/kafka1/","directoryName":"kafka1"},"frontmatter":{"title":"kafka原理"}},"next":{"fields":{"slug":"/red-black-tree/","directoryName":"red-black-tree"},"frontmatter":{"title":"红黑树"}}}},"staticQueryHashes":["336482444"]}