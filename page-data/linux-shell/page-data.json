{"componentChunkName":"component---src-templates-blog-post-js","path":"/linux-shell/","result":{"data":{"site":{"siteMetadata":{"title":"F&Y-BLOG","author":"kimifdw"}},"markdownRemark":{"id":"30a8d07b-1311-59a4-a281-ef1f46bdda97","html":"<h2 id=\"常用指令\"><a href=\"#%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>常用指令</h2>\n<ol>\n<li>\n<p><code class=\"language-text\">history</code>。查询用户操作日志</p>\n<blockquote>\n<p>export HISTTIMEFORMAT=“%F %T <code class=\"language-text\">who -u am i 2&gt;/dev/null| awk &#39;{print $NF}&#39;|sed -e &#39;s/[()]//g&#39;</code> <code class=\"language-text\">whoami</code> ”</p>\n</blockquote>\n</li>\n</ol>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9c83b7e51d4d4e207f955fa18f141f50/83b75/history.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 43.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8UlEQVQoz4VR2Y6DMBALgoK2glyEQEoScpTd///DdaDq09L1AxqZmdieIeM4Wuc277ctxBDWA855Zy24EPOek7VOCtm2rUS3KlhXa4whSk0OvX8OFyp9PzP+TpPquk7P87wUxJRAvoavlVMMHt2U0qZpKKOMMc6Z1jNMEDVdK/stxiQEx4CUUqDiXIhS1XVdVRXRWl8P+5jywyxf9/vZ/QY5AeXLhRUq/+w7XmGwfbvBcdEWHNEVbE8flI+FBXwL/+jajp6ROS+ZpSzDH5VTThHFrDVOxY7MkF4Wg4MRbP+/Uz3x+tAPiN33/VDQY3/w8AuG6DKjWfmhrQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/9c83b7e51d4d4e207f955fa18f141f50/fcda8/history.png\"\n        srcset=\"/static/9c83b7e51d4d4e207f955fa18f141f50/12f09/history.png 148w,\n/static/9c83b7e51d4d4e207f955fa18f141f50/e4a3f/history.png 295w,\n/static/9c83b7e51d4d4e207f955fa18f141f50/fcda8/history.png 590w,\n/static/9c83b7e51d4d4e207f955fa18f141f50/83b75/history.png 695w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"文件权限与目录配置\"><a href=\"#%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E4%B8%8E%E7%9B%AE%E5%BD%95%E9%85%8D%E7%BD%AE\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>文件权限与目录配置</h2>\n<ol>\n<li><code class=\"language-text\">sudo gpasswd -a &lt;你的用户名&gt; docker</code>。将用户加入到某个组内，<strong>需重启对应的服务</strong>。需退出当前连接的用户【远程连接】</li>\n<li>Linux 将文件可存取的身份分为三个类别，分别是<strong>owner</strong>/<strong>group</strong>/<strong>others</strong>，分别具有读、写、可执行等权限</li>\n<li>在 Linux 中，任何一个文件都具有“User，Group 以及 Others”三种身份的个别权限</li>\n<li>\n<p>文件权限\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9a562e4310fb21f77417488d80ee513f/9cea8/fileDemo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 22.972972972972975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABC0lEQVQY0x2Q6XKDMAyEeZjeTQsBwo0x900ghDSl0+n7P8XW0g+PPJa8+600J6txjDM8mR7e3RiindCsdxhhiubyBUsUMEWOfvtB3IyI6gH5tEL2M7rrjnn/49kHw8Hj0YVmRBk+fMGCr6cQXt4iHRZ8BhJJd4auhvVQIu0XOGkNAiBTEpbdzCZxMyEoOzbX/KKFlRR4tny8ORE7T/dfbrbXb64nWfGdemGlCMeVT7/tKOcN1XxjaluW0Mw4V4QJ45JgUPbIxosiTLhS3y869WljeroTrVBUoh45DZEf1Lo4sps1TPBiB7xDilItNxzVKkhQV9FJpFZvVGk+ac8IVWx7mHi/NHPwBAv+A0R5sFya0NVpAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/9a562e4310fb21f77417488d80ee513f/fcda8/fileDemo.png\"\n        srcset=\"/static/9a562e4310fb21f77417488d80ee513f/12f09/fileDemo.png 148w,\n/static/9a562e4310fb21f77417488d80ee513f/e4a3f/fileDemo.png 295w,\n/static/9a562e4310fb21f77417488d80ee513f/fcda8/fileDemo.png 590w,\n/static/9a562e4310fb21f77417488d80ee513f/efc66/fileDemo.png 885w,\n/static/9a562e4310fb21f77417488d80ee513f/c83ae/fileDemo.png 1180w,\n/static/9a562e4310fb21f77417488d80ee513f/9cea8/fileDemo.png 1278w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ol>\n<li>文件类型，即文件为补录、文件或链接等</li>\n<li>目录为<strong>d</strong></li>\n<li>文件为<strong>-</strong></li>\n<li><code class=\"language-text\">rwx</code>。分别为读【4】、写【2】、执行【1】；没有权限为<code class=\"language-text\">-</code>，且都是针对某些账号来设计权限，其中写权限不包含删除</li>\n<li><code class=\"language-text\">ugoa</code>。分别表示 user【u】、group【g】、others【o】和 all【a】</li>\n<li><code class=\"language-text\">+/-</code>。分别表示+【增加权限】、-【减少权限】，只要没有指定到的项目，则该权限不会被改动</li>\n</ol>\n</li>\n<li>\n<p>修改权限</p>\n<ol>\n<li><code class=\"language-text\">chgrp -R</code>。改变文件所属群组，要改变的群组名必须在<strong>etc/group</strong>文件中存在，其中<code class=\"language-text\">-R</code> 进行递归的持续变更</li>\n<li><code class=\"language-text\">chown -R</code>。改变文件拥有者，要改变的用户名必须在<strong>etc/passwd</strong>文件中出现，其中<code class=\"language-text\">-R</code> 进行递归的持续变更；也可以使用<code class=\"language-text\">chown user.group file</code>来同时处理 user 变更和 group 变更</li>\n<li><code class=\"language-text\">chmod</code>。改变文件的权限，可进行类似<code class=\"language-text\">chmod u=rwx,go=rx file</code>的授权</li>\n</ol>\n</li>\n<li>\n<p>目录权限</p>\n<ol>\n<li><code class=\"language-text\">r</code>。具有读取目录结构清单的权限。</li>\n<li><code class=\"language-text\">w</code>。</li>\n<li>创建新的文件与目录</li>\n<li>删除已经存在的文件与目录</li>\n<li>将已存在的文件或目录进行更名</li>\n<li>搬移该目录下的文件、目录位置</li>\n<li><code class=\"language-text\">x</code>。能否进入该目录称为工作目录的用途</li>\n<li>至少需要开放<code class=\"language-text\">rx</code>才能让任何人进行浏览</li>\n</ol>\n</li>\n<li>\n<p>目录配置</p>\n<ol>\n<li>FHS 定义三个目录用于放置数据，分别是/、/usr、/var。</li>\n<li>对于根目录[/]，FHS 建议所在分区应越小越好，且应用程序所安装的软件最好不要与根目录放在同一个分区</li>\n<li><code class=\"language-text\">/bin</code>。单人维护下还能够操作的指令。</li>\n<li><code class=\"language-text\">boot</code>。放置开机所使用的的文件</li>\n<li><code class=\"language-text\">/etc</code>。获取配置文件</li>\n<li><code class=\"language-text\">/lib</code>。系统的函数库</li>\n<li><code class=\"language-text\">/opt</code>。给第三方协力软件放置的目录</li>\n<li><code class=\"language-text\">/srv</code>。一些网络服务启动之后，这些服务需要取用的网络数据目录</li>\n<li><code class=\"language-text\">/tmp</code>。一般使用者主键表</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"tcp-相关\"><a href=\"#tcp-%E7%9B%B8%E5%85%B3\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TCP 相关</h2>\n<ol>\n<li><code class=\"language-text\">/proc/sys/net/ipv4/tcp_wmem</code>。发送缓冲区，三个值分别代表最小值，默认值，最大值</li>\n<li><code class=\"language-text\">/proc/sys/net/ipv4/tcp_rmem</code>。接收缓冲区，三个值分别代表最小值，默认值，最大值</li>\n<li><code class=\"language-text\">ip addr show ens33 | grep inet | awk &#39;{ print $2; }&#39; | sed &#39;s/\\/.*$//&#39;</code>。查看 ip addr 的地址</li>\n</ol>\n<h3 id=\"curl\"><a href=\"#curl\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>curl</h3>\n<ol>\n<li><code class=\"language-text\">curl -o /dev/null -s -w &quot;time_connect: %{time_connect}\\n time_start transfer: %{time_starttransfer}\\n time_nslookup:%{time_namelookup}\\n time_total: %{time_total}\\n&quot; &quot;https://jdznjjtest.auxgroup.com/app/errorcode&quot;</code>。</li>\n</ol>\n<h2 id=\"查看防火墙\"><a href=\"#%E6%9F%A5%E7%9C%8B%E9%98%B2%E7%81%AB%E5%A2%99\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>查看防火墙</h2>\n<ol>\n<li><code class=\"language-text\">sudo ufw app list</code>。查看防火墙允许的应用列表</li>\n</ol>\n<h2 id=\"内存分析\"><a href=\"#%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>内存分析</h2>\n<h3 id=\"pstree\"><a href=\"#pstree\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pstree</h3>\n<blockquote>\n<p>线程与同一个进程内的其他线程共享同一块内存的一个特殊进程，都有自己的 pid</p>\n</blockquote>\n<ol>\n<li><code class=\"language-text\">pstree</code>：将进程以树状展示</li>\n<li><code class=\"language-text\">pstree -p</code>：看到对应系统中的每个进程的使用线程数</li>\n<li><code class=\"language-text\">pstree -p pid</code>：某个进程的线程情况</li>\n</ol>\n<h3 id=\"vmstat\"><a href=\"#vmstat\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>vmstat</h3>\n<blockquote>\n<p>对操作系统整体的虚拟内存、进程、CPU 活动进行监控</p>\n</blockquote>\n<ol>\n<li><code class=\"language-text\">vmstat &lt;时间间隔&gt; &lt;采集次数&gt;</code>\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/427b140dfccbb5afe3197ef13ec77850/1fbe8/vmstat-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32.43243243243243%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+ElEQVQY0zWQ23aDIBBFfXAFEOSigFFAK5dEk9X2//+ug6s5PDL7bIaGsX4YxnUNxtp939cQ5nnetk1KoZTCGFNWI4UYxlFKqaRyzhljEEJNzwWMHsd5PJ/HeZZHySl9//wOSmJSc0MIYABgzLml67ppmqwxvO8rDBcp5xhjKQXkX1eXEBzh/4AEVDnnEALUwRu11pTShn9gwFJMUAGG83xJwTEmHxzbyaaUYBLMxlijNWO0mr33JZe4x4uNYH6930qKaiYEtCBZluXqXavZ2FGPFaaUWW1CDj67AMe7+X7fY4KVbjfYt6ZtW865d04bDYVCwG+KjpA/YXceOwoz2scAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/427b140dfccbb5afe3197ef13ec77850/fcda8/vmstat-1.png\"\n        srcset=\"/static/427b140dfccbb5afe3197ef13ec77850/12f09/vmstat-1.png 148w,\n/static/427b140dfccbb5afe3197ef13ec77850/e4a3f/vmstat-1.png 295w,\n/static/427b140dfccbb5afe3197ef13ec77850/fcda8/vmstat-1.png 590w,\n/static/427b140dfccbb5afe3197ef13ec77850/1fbe8/vmstat-1.png 757w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li>\n<p>参数说明</p>\n<ol>\n<li><code class=\"language-text\">procs</code></li>\n<li>r。运行和等待 CPU 时间片的进程数</li>\n<li>b。阻塞的进程数</li>\n<li><code class=\"language-text\">Memory</code></li>\n<li>swpd。虚拟内存使用情况</li>\n<li>free。当前空闲的物理内存</li>\n<li>buff。缓存的内存大小</li>\n<li>Cache。缓存的内存大小</li>\n<li><code class=\"language-text\">Swap</code></li>\n<li>si。有磁盘读入内存大小</li>\n<li>so。由内存写入磁盘大小</li>\n<li><code class=\"language-text\">IO</code></li>\n<li>bi。由块设备读入数据的总量</li>\n<li>bo。写到块设备数据的总量</li>\n<li><code class=\"language-text\">System</code></li>\n<li>in。每秒中断数</li>\n<li>cs。每秒产生的上下文切换次数【线程切换】</li>\n<li><code class=\"language-text\">CPU</code></li>\n<li>us。用户进程消耗的 CPU 时间百分比</li>\n<li>sy。系统调用消耗的 CPU 时间百分比</li>\n<li>id。CPU 处在空间状态的时间百分比</li>\n<li>wa。等待 IO 的 CPU 时间</li>\n</ol>\n</li>\n<li>\n<h3 id=\"pidstat\"><a href=\"#pidstat\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pidstat</h3>\n<blockquote>\n<p>用来监控全部或指定进程的 cpu、内存、线程、设备 IO 等系统资源的占用情况</p>\n</blockquote>\n</li>\n<li><code class=\"language-text\">pidstat -w &lt;时间间隔&gt;</code>\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a6c55f051ce551e08b4e2a95290cc6df/68e9c/pstat-w.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 69.5945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9klEQVQoz1WTabaiMBCFGRMmRZR5CARQ1Ke7cv9r6A/s1tf1g1MnSd3cIRiXy7JcLnXTTON4vd7yLEvT1PM823HieJ8kSRiFhmEEQRDHsWPb9K7rHg6HwPeNMAx9KvDZjqLIsqzdbkcvXLGndmvZts3KMUmE6zLMGSklEIZSfdPUqu9BAI+9Fcv3AGqahu/xeKI5nU6jHmnYMj4F1WnU9/tdCgGxjZUIAl9Ib9Q6hIKUF3RVlR708/mM9/vv8DAMbVsPWkOJe943Q9e0rKosxVadUlmW1XWttT4mh+9w16mmrpRSaEA/K2marfCmWVWllGAK2OZF3qmOAuU37es06dvtS3uaZhxfSfUDPknpzedz3/ePx0PrdeU7DJOua/gyiZ/vmbdzbdsiwRVC9aooCgRiLc6ZpvkfbXIuijLfKCEhikI0YxJ0oI1auAyDJhqgXcf5O7ws13HUeE505Eqk9MRrmJb+5za0y6KY59n3fuW0KZyU6ub5jKu4bdvWNM+7XcTNXdt6OCZkPwxFnkOEA54nP6wR1uFq23W4TbzcPI5jFK60yy0qNNdNnWap2gLzfP+rmQcw6gHynOMlWrZN5lEY8LbRx3tCM1aT1uPn0baN8xFMnefz0Ct+DzSTM0m8Xq/rsrzdXjULAVye57hNzrgdBv579g8wHzZ/LyKE+QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/a6c55f051ce551e08b4e2a95290cc6df/fcda8/pstat-w.png\"\n        srcset=\"/static/a6c55f051ce551e08b4e2a95290cc6df/12f09/pstat-w.png 148w,\n/static/a6c55f051ce551e08b4e2a95290cc6df/e4a3f/pstat-w.png 295w,\n/static/a6c55f051ce551e08b4e2a95290cc6df/fcda8/pstat-w.png 590w,\n/static/a6c55f051ce551e08b4e2a95290cc6df/68e9c/pstat-w.png 654w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li>\n<p>参数说明</p>\n<ol>\n<li>cswch/s。每秒主动任务上下文切换数量。</li>\n<li>nvcswch/s。每秒被动任务上下文切换数量。</li>\n</ol>\n</li>\n<li><code class=\"language-text\">pidstat -tt -p &lt;pid&gt;</code>\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9f2854485c31bb53ed06223f52ef4a9b/3a737/pidstat-tt-p.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 34.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9UlEQVQY002Q17KEIBBEDaBiQiUZt7TK///GPbAP9/bTKB2mJ9u2zXt3HMc8z9baUetpmsZxzPNsGIau67Isq+uauSiKnL//4ZzzzrVtC4O5LMu+7xFjtK1rCMGYRWvNk1Jq3/cQ/DD0VVVF8XWeUPiQUmLcqPY6ryg2BoF1mDiWIkEIQdAngX2jGHfeUfKWNmw+10U4yy/LguzXghkOzDXBex/FtA0p+SduGoUxDWFDNQmcgRmCoUvCn5gmFMY4ilX7vu80xZJhDZ6K3mNEGmJi7vt+nuc8jihmSRuskIJT8SmkhM79COdOYwItmCFQwSWwDuQv3hkYp25p8lYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/9f2854485c31bb53ed06223f52ef4a9b/fcda8/pidstat-tt-p.png\"\n        srcset=\"/static/9f2854485c31bb53ed06223f52ef4a9b/12f09/pidstat-tt-p.png 148w,\n/static/9f2854485c31bb53ed06223f52ef4a9b/e4a3f/pidstat-tt-p.png 295w,\n/static/9f2854485c31bb53ed06223f52ef4a9b/fcda8/pidstat-tt-p.png 590w,\n/static/9f2854485c31bb53ed06223f52ef4a9b/efc66/pidstat-tt-p.png 885w,\n/static/9f2854485c31bb53ed06223f52ef4a9b/3a737/pidstat-tt-p.png 897w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li>\n<p>参数表示</p>\n<ol>\n<li>TGID。主线程</li>\n<li>TID。线程 id</li>\n<li>%usr。进程在用户空间占用 CPU 的百分比</li>\n<li>%system。进程在内核空间占用 CPU 的百分比</li>\n<li>%guest。进程在虚拟机占用 CPU 的百分比</li>\n<li>CPU。处理进程的 CPU 编号</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"建议\"><a href=\"#%E5%BB%BA%E8%AE%AE\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>建议</h2>\n<ol>\n<li>尽量不要使用 root 直接登录系统，应使用一般账号登录系统，有需要再转换身份</li>\n</ol>\n<h2 id=\"资料\"><a href=\"#%E8%B5%84%E6%96%99\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>资料</h2>\n<ol>\n<li><a href=\"https://blog.csdn.net/weifangan/article/details/80741981\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">CURL -w 参数详解</a></li>\n<li><a href=\"https://curl.se/docs/manpage.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">curl官方说明书</a></li>\n<li><a href=\"https://curl.github.io/curl-cheat-sheet/http-sheet.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">curl-cheat-sheet</a></li>\n</ol>","timeToRead":6,"frontmatter":{"title":"linux指令集","date":"December 13, 2020","spoiler":"linux 指令集"},"fields":{"slug":"/linux-shell/"}}},"pageContext":{"slug":"/linux-shell/","previous":{"fields":{"slug":"/rest-atom/","directoryName":"rest-atom"},"frontmatter":{"title":"atom相关知识点"}},"next":{"fields":{"slug":"/git shell/","directoryName":"git shell"},"frontmatter":{"title":"git日常易被遗忘的命令"}}}},"staticQueryHashes":["336482444"]}