{"componentChunkName":"component---src-templates-blog-post-js","path":"/linux-shell/","result":{"data":{"site":{"siteMetadata":{"title":"FDW-blog","author":"kimifdw"}},"markdownRemark":{"id":"d61f1f97-5809-545c-a844-e6951e0eeb8b","html":"<h2 id=\"内存分析\"><a href=\"#%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>内存分析</h2>\n<h3 id=\"pstree\"><a href=\"#pstree\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pstree</h3>\n<blockquote>\n<p>线程与同一个进程内的其他线程共享同一块内存的一个特殊进程，都有自己的pid</p>\n</blockquote>\n<ol>\n<li><code class=\"language-text\">pstree</code>：将进程以树状展示</li>\n<li><code class=\"language-text\">pstree -p</code>：看到对应系统中的每个进程的使用线程数</li>\n<li><code class=\"language-text\">pstree -p pid</code>：某个进程的线程情况</li>\n</ol>\n<h3 id=\"vmstat\"><a href=\"#vmstat\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>vmstat</h3>\n<blockquote>\n<p>对操作系统整体的虚拟内存、进程、CPU活动进行监控</p>\n</blockquote>\n<ol>\n<li><code class=\"language-text\">vmstat &lt;时间间隔&gt; &lt;采集次数&gt;</code>\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/427b140dfccbb5afe3197ef13ec77850/1fbe8/vmstat-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32.43243243243243%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+ElEQVQY0y2Q246EIBBEfdBBuTuKqOAoF6M4u9n//7ttjEUCAbr6FBSEUKWUd26aJu/9tq6LXWKMUkouRFPXGBNKCWy7rmtvzcboYYCrggu5rutxnMdxpJT2fQ/B//z+vVtZN1kIITBba51zMMOJ1npQijNWcC6MMYAC7L5HqAD4eSYhOKofVa8KsDHExVrcNEoNfd9TQh5ziNFtm78FQVK6pBR1RtcI5UWPY/AeKjHGYFZgpqRgjGdyiPBscLrbfF3fthXoRkPsBuNpzD/y+SxNJisIksmYkP7dm2hNnC2MeR613jbHGK1ej8qypIzN8wQe6CZuQZd/pFEeJvDXP8MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/427b140dfccbb5afe3197ef13ec77850/fcda8/vmstat-1.png\"\n        srcset=\"/static/427b140dfccbb5afe3197ef13ec77850/12f09/vmstat-1.png 148w,\n/static/427b140dfccbb5afe3197ef13ec77850/e4a3f/vmstat-1.png 295w,\n/static/427b140dfccbb5afe3197ef13ec77850/fcda8/vmstat-1.png 590w,\n/static/427b140dfccbb5afe3197ef13ec77850/1fbe8/vmstat-1.png 757w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li>\n<p>参数说明</p>\n<ol>\n<li>\n<p><code class=\"language-text\">procs</code></p>\n<ol>\n<li>r。运行和等待CPU时间片的进程数</li>\n<li>b。阻塞的进程数</li>\n</ol>\n</li>\n<li>\n<p><code class=\"language-text\">Memory</code></p>\n<ol>\n<li>swpd。虚拟内存使用情况</li>\n<li>free。当前空闲的物理内存</li>\n<li>buff。缓存的内存大小</li>\n<li>Cache。缓存的内存大小</li>\n</ol>\n</li>\n<li>\n<p><code class=\"language-text\">Swap</code></p>\n<ol>\n<li>si。有磁盘读入内存大小</li>\n<li>so。由内存写入磁盘大小</li>\n</ol>\n</li>\n<li>\n<p><code class=\"language-text\">IO</code></p>\n<ol>\n<li>bi。由块设备读入数据的总量</li>\n<li>bo。写到块设备数据的总量</li>\n</ol>\n</li>\n<li>\n<p><code class=\"language-text\">System</code></p>\n<ol>\n<li>in。每秒中断数</li>\n<li>cs。每秒产生的上下文切换次数【线程切换】</li>\n</ol>\n</li>\n<li>\n<p><code class=\"language-text\">CPU</code></p>\n<ol>\n<li>us。用户进程消耗的CPU时间百分比</li>\n<li>sy。系统调用消耗的CPU时间百分比</li>\n<li>id。CPU处在空间状态的时间百分比</li>\n<li>wa。等待IO的CPU时间</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<h3 id=\"pidstat\"><a href=\"#pidstat\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pidstat</h3>\n<blockquote>\n<p>用来监控全部或指定进程的cpu、内存、线程、设备IO等系统资源的占用情况</p>\n</blockquote>\n</li>\n<li><code class=\"language-text\">pidstat -w &lt;时间间隔&gt;</code>\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a6c55f051ce551e08b4e2a95290cc6df/68e9c/pstat-w.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 69.5945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACAklEQVQoz0VTWbarIBBUYxScB5xABjV6T6JvAVlP9r+HV5ibGz440HZ1VxelsyzLersNnGultu2n77qasSRJPM8r8qKqqjzPHcehhFZldb1ecfZ9vyiKNE0c5FFCojgmlCRJ7LpuFOEWIy/LsiSOseNMCK2rihACMHIQQQlnXpZxFPM8A4B6+BAEAY0oSkgpizzL8lwqVbMaOdpo2/Bv7fu+TPrx2JGdpunFLj9NEtTWWhd5Dv7rtnI+aKX3Y2d1/QVP08w5N/MMSsCflIKyKPCp67ooogCPUjYNG/pBG9My9gWbabJVjSFhCDAiEKk+y/d9j5ldzxNiRCFwltIe0OBD+ziWedr3A0hogwgmHIWwB6ks7cvltq5Kyf34tywzRP12hmBi5MZMZVlBFUQ4Fw1rcBiGIUtTdEa5pm0gAQbs+8H3L79gbSztc6q27zsLFqIsixPcx3HkWdqCsXoyE/SHbGEY/Kl9zLN5q403h9brur1nVlC7gNqXddtgHtgJz3m+84f27bbKUWCnlEZnH60NNDv5cwiGCKq0bYNrnuUw0FcwpTTYYqowDCklbzAafp7KloMKjDFkdm2HHl/w/fGYJ32/30+TWNpIKk+rKa2yLHVdzxgjBIedjNFhEHzVxs+g5Ig9Ohe8+Xq9ns+nfedhyE+HwQswCdSSyuqaJb8O/Q/PPDelshWpXgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/a6c55f051ce551e08b4e2a95290cc6df/fcda8/pstat-w.png\"\n        srcset=\"/static/a6c55f051ce551e08b4e2a95290cc6df/12f09/pstat-w.png 148w,\n/static/a6c55f051ce551e08b4e2a95290cc6df/e4a3f/pstat-w.png 295w,\n/static/a6c55f051ce551e08b4e2a95290cc6df/fcda8/pstat-w.png 590w,\n/static/a6c55f051ce551e08b4e2a95290cc6df/68e9c/pstat-w.png 654w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li>\n<p>参数说明</p>\n<ol>\n<li>cswch/s。每秒主动任务上下文切换数量。</li>\n<li>nvcswch/s。每秒被动任务上下文切换数量。</li>\n</ol>\n</li>\n<li><code class=\"language-text\">pidstat -tt -p &lt;pid&gt;</code>\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9f2854485c31bb53ed06223f52ef4a9b/3a737/pidstat-tt-p.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 34.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA80lEQVQY012Q246EIBBEjcQryh0EZkYz//+Te8RNNtl+INLW6eqiK1TOr/fbWhtD5LTGrHLtum7f1TRNfMzLIte7879iDM65tZX3oRdi2zdjDE3GppSUUs47Rkq5llIZviyLEOKGr/P03uMwDIPoxa70cRzWwtpccoyRv5zAaIDRnw254VILPuM49n3PVSn9qhU3rVQIwRirtcaNDjCL5JxrLb/wh7TO/cHa1Fp1K6QswGikXNHElMiCgP4NswOxp3l+YhjrWMy2vRGhhnymAENe1/X9fum0zJ/TeEPgx1nK7TjS3qoZGhbGnCsaguRWvAjiH4aHGI26UprXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"image\"\n        title=\"\"\n        src=\"/static/9f2854485c31bb53ed06223f52ef4a9b/fcda8/pidstat-tt-p.png\"\n        srcset=\"/static/9f2854485c31bb53ed06223f52ef4a9b/12f09/pidstat-tt-p.png 148w,\n/static/9f2854485c31bb53ed06223f52ef4a9b/e4a3f/pidstat-tt-p.png 295w,\n/static/9f2854485c31bb53ed06223f52ef4a9b/fcda8/pidstat-tt-p.png 590w,\n/static/9f2854485c31bb53ed06223f52ef4a9b/efc66/pidstat-tt-p.png 885w,\n/static/9f2854485c31bb53ed06223f52ef4a9b/3a737/pidstat-tt-p.png 897w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n<li>\n<p>参数表示</p>\n<ol>\n<li>TGID。主线程</li>\n<li>TID。线程id</li>\n<li>%usr。进程在用户空间占用CPU的百分比</li>\n<li>%system。进程在内核空间占用CPU的百分比</li>\n<li>%guest。进程在虚拟机占用CPU的百分比</li>\n<li>CPU。处理进程的CPU编号</li>\n</ol>\n</li>\n</ol>","timeToRead":2,"frontmatter":{"title":"linux指令集","date":"October 21, 2020","spoiler":"linux 指令集"},"fields":{"slug":"/linux-shell/"}}},"pageContext":{"slug":"/linux-shell/","previous":{"fields":{"slug":"/10.20 problem/","directoryName":"10.20 problem"},"frontmatter":{"title":"1020随笔"}},"next":{"fields":{"slug":"/thread-safe/","directoryName":"thread-safe"},"frontmatter":{"title":"线程安全性"}}}},"staticQueryHashes":["336482444"]}